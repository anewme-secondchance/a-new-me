<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mindset | A New Me</title>

<style>
body {
  margin: 0;
  font-family: Arial;
  background: #eef2f7;
}

/* LOCK SCREEN */
.lock-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #1f3c88;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  color: white;
  z-index: 9999;
}

.lock-screen input {
  padding: 10px;
  font-size: 18px;
  width: 120px;
  text-align: center;
  margin-top: 10px;
  border-radius: 6px;
  border: none;
}

.lock-screen button {
  margin-top: 10px;
  padding: 8px 14px;
  border-radius: 6px;
  border: none;
  background: white;
  color: #1f3c88;
  font-weight: bold;
  cursor: pointer;
}

/* Header */
.app-header {
  display: flex;
  align-items: center;
  background: #1f3c88;
  color: white;
  padding: 15px;
}

.back-btn {
  background: white;
  color: #1f3c88;
  border: none;
  padding: 6px 14px;
  border-radius: 20px;
  cursor: pointer;
  margin-right: 15px;
}

.container {
  padding: 20px;
  max-width: 900px;
  margin: auto;
}

.card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

textarea {
  width: 100%;
  min-height: 80px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
</style>
</head>

<body>

<!-- LOCK SCREEN -->
<div class="lock-screen" id="lockScreen">
  <h2 id="lockTitle">Enter PIN</h2>
  <input type="password" maxlength="4" id="pinInput">
  <button onclick="handlePin()">Submit</button>
  <button onclick="resetPin()">Reset PIN</button>
  <p id="pinMessage"></p>
</div>

<div id="appContent" style="display:none;">

<div class="app-header">
  <button onclick="goBack()" class="back-btn">‚Üê Back</button>
  <div>Mindset</div>
</div>

<div class="container">

<div class="card">
<h3>What went well today?</h3>
<textarea id="reflection1"></textarea>
</div>

<div class="card">
<h3>What is one step forward I took?</h3>
<textarea id="reflection2"></textarea>
</div>

<div class="card">
<h3>What can I improve tomorrow?</h3>
<textarea id="reflection3"></textarea>
</div>

</div>
</div>

<script>
function goBack() {
  window.location.href = "index.html";
}

/* PIN SYSTEM */
function handlePin() {
  const input = document.getElementById("pinInput").value;
  const storedPin = localStorage.getItem("mindset_pin");
  const message = document.getElementById("pinMessage");

  if (!storedPin) {
    if (input.length === 4) {
      localStorage.setItem("mindset_pin", input);
      unlockApp();
    } else {
      message.textContent = "Create a 4-digit PIN";
    }
  } else {
    if (input === storedPin) {
      unlockApp();
    } else {
      message.textContent = "Incorrect PIN";
    }
  }
}

function unlockApp() {
  document.getElementById("lockScreen").style.display = "none";
  document.getElementById("appContent").style.display = "block";
}

function resetPin() {
  localStorage.removeItem("mindset_pin");
  document.getElementById("pinMessage").textContent = "PIN Reset. Create new PIN.";
}

window.onload = function() {
  const storedPin = localStorage.getItem("mindset_pin");
  if (!storedPin) {
    document.getElementById("lockTitle").textContent = "Create a 4-Digit PIN";
  }
};

/* SAVE REFLECTIONS */
function setupSave(id, key) {
  const field = document.getElementById(id);
  const saved = localStorage.getItem(key);
  if (saved) field.value = saved;
  field.addEventListener("input", () => {
    localStorage.setItem(key, field.value);
  });
}

setupSave("reflection1","daily1");
setupSave("reflection2","daily2");
setupSave("reflection3","daily3");

</script>

</body>
</html>
